{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","assets/icons/lupa-en-ingle.svg","pages/adminCP/AdminCP.style.js","pages/adminCP/AdminCP.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","timerID","Container","styled","div","Title","h2","SearchField","textarea","props","isSearchFieldOnInputMode","lupa","ErrUsersNotFound","h4","TableWrapper","TableHead","Table","table","Td","td","isRoleTd","css","AdminCP","useState","setIsSearchFieldOnInputMode","users","setUsers","searchFieldRef","useRef","useEffect","a","axios","get","data","current","focus","handleSearchFieldChange","e","value","target","length","clearTimeout","setTimeout","post","qry","foundUsers","handleRoleChange","userId","oldUsers","selectedUserIndex","findIndex","u","_id","Role","put","role","type","onMouseDown","onBlur","onChange","ref","map","user","idx","title","name","email","NativeSelect"],"mappings":"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","file":"static/js/21.5dad8015.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default __webpack_public_path__ + \"static/media/lupa-en-ingle.02eb3d01.svg\";","import styled, { css } from 'styled-components';\r\nimport lupa from 'assets/icons/lupa-en-ingle.svg';\r\n\r\nexport const Container = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\toverflow-y: auto;\r\n`;\r\n\r\nexport const Title = styled.h2`\r\n\ttext-transform: uppercase;\r\n\tcolor: var(--lmed-green-02);\r\n\tfont-family: 'NunitoExtraBold' !important;\r\n\tfont-size: 30px;\r\n\ttext-align: center;\r\n`;\r\n\r\nexport const SearchField = styled.textarea`\r\n\tborder-radius: 12px;\r\n\tbackground-color: var(--lmed-green-00);\r\n\twidth: 55%;\r\n\tmax-width: 220px;\r\n\tmin-height: 30px;\r\n\tmargin-top: 17px;\r\n\tbackground-image: ${(props) =>\r\n\t\tprops.isSearchFieldOnInputMode ? '' : `url(${lupa})`};\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: 50%;\r\n\tbackground-size: 24px;\r\n\tcursor: ${(props) => (props.isSearchFieldOnInputMode ? 'text' : 'pointer')};\r\n\tpadding: 5.3px;\r\n\tresize: none;\r\n\tcolor: #fff;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n`;\r\n\r\nexport const ErrUsersNotFound = styled.h4`\r\n\ttext-align: left;\r\n\tmargin-top: 20px;\r\n\twidth: 60%;\r\n\tmax-width: 250px;\r\n`;\r\n\r\nexport const TableWrapper = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\twidth: 95%;\r\n\theight: 70%;\r\n\tmargin-top: 21px;\r\n`;\r\n\r\nexport const TableHead = styled.div`\r\n\tdisplay: flex;\r\n\theight: 15%;\r\n\twidth: 100%;\r\n\tbackground-color: var(--lmed-green-02);\r\n\tborder-radius: 12px 12px 0 0;\r\n\tmin-height: 48.51px;\r\n\r\n\t& > span {\r\n\t\tdisplay: grid;\r\n\t\tplace-content: center;\r\n\t\tmin-width: 25%;\r\n\t\theight: 100%;\r\n\t\tcolor: var(--lmed-green-03);\r\n\t\tfont-family: 'NunitoExtraBold' !important;\r\n\t}\r\n`;\r\n\r\nexport const Table = styled.table`\r\n\theight: 85%;\r\n\twidth: 100%;\r\n\ttable-layout: fixed;\r\n\r\n\t& tr {\r\n\t\tdisplay: flex;\r\n\t\theight: 50px;\r\n\t\talign-items: center;\r\n\t\tborder-bottom: 2px solid var(--lmed-green-02);\r\n\t}\r\n\r\n\t& tr div {\r\n\t\tmax-height: 20px;\r\n\t}\r\n`;\r\n\r\nexport const Td = styled.td`\r\n\tdisplay: block;\r\n\tmin-width: 25%;\r\n\tmax-height: 20px;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\twhite-space: nowrap;\r\n\ttext-align: center;\r\n\tcolor: var(--lmed-green-03);\r\n\t${(props) =>\r\n\t\tprops.isRoleTd\r\n\t\t\t? css`\r\n\t\t\t\t\t& {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\tpadding-left: 15px;\r\n\t\t\t\t\t}\r\n\t\t\t  `\r\n\t\t\t: ''}\r\n`;\r\n","import React, { useRef, useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport {\r\n\tContainer,\r\n\tTitle,\r\n\tSearchField,\r\n\tErrUsersNotFound,\r\n\tTableWrapper,\r\n\tTable,\r\n\tTableHead,\r\n\tTd\r\n} from './AdminCP.style';\r\nimport axios from 'axios';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\n\r\nlet timerID;\r\n\r\nexport default function AdminCP() {\r\n\tconst [isSearchFieldOnInputMode, setIsSearchFieldOnInputMode] = useState(\r\n\t\tfalse\r\n\t);\r\n\tconst [users, setUsers] = useState([]);\r\n\tconst searchFieldRef = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst { data } = await axios.get('/admin/readAll');\r\n\t\t\tsetUsers([...data.users]);\r\n\t\t})();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSearchFieldOnInputMode) {\r\n\t\t\tsearchFieldRef.current.focus();\r\n\t\t}\r\n\t}, [isSearchFieldOnInputMode]);\r\n\r\n\tconst handleSearchFieldChange = (e) => {\r\n\t\tconst { value } = e.target;\r\n\t\tsetIsSearchFieldOnInputMode(value.length >= 1);\r\n\t\tclearTimeout(timerID);\r\n\t\ttimerID = setTimeout(async () => {\r\n\t\t\tconst { data } = await axios.post('/admin/searchByName', {\r\n\t\t\t\tqry: value\r\n\t\t\t});\r\n\t\t\tsetUsers([...data.foundUsers]);\r\n\t\t}, 600);\r\n\t};\r\n\r\n\tconst handleRoleChange = async (e, userId) => {\r\n\t\tconst { value } = e.target;\r\n\t\tsetUsers((oldUsers) => {\r\n\t\t\tconst selectedUserIndex = oldUsers.findIndex((u) => u._id === userId);\r\n\t\t\toldUsers[selectedUserIndex].Role = value;\r\n\t\t\treturn [...oldUsers];\r\n\t\t});\r\n\t\tawait axios.put(`/admin/updateRole/${userId}`, { role: value });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Title>Panel de Administraci&oacute;n</Title>\r\n\t\t\t<SearchField\r\n\t\t\t\ttype={isSearchFieldOnInputMode ? 'text' : 'button'}\r\n\t\t\t\tisSearchFieldOnInputMode={isSearchFieldOnInputMode}\r\n\t\t\t\tonMouseDown={() => setIsSearchFieldOnInputMode(true)}\r\n\t\t\t\tonBlur={handleSearchFieldChange}\r\n\t\t\t\tonChange={handleSearchFieldChange}\r\n\t\t\t\tref={searchFieldRef}\r\n\t\t\t></SearchField>\r\n\t\t\t{users.length === 0 ? (\r\n\t\t\t\t<ErrUsersNotFound>No se han encontrado usuarios.</ErrUsersNotFound>\r\n\t\t\t) : (\r\n\t\t\t\t<TableWrapper>\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<span>ID</span>\r\n\t\t\t\t\t\t<span>Nombre</span>\r\n\t\t\t\t\t\t<span>Email</span>\r\n\t\t\t\t\t\t<span>Rol</span>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<Table>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{users.map((user, idx) => (\r\n\t\t\t\t\t\t\t\t<tr key={idx}>\r\n\t\t\t\t\t\t\t\t\t<Td title={user._id}>{user._id}</Td>\r\n\t\t\t\t\t\t\t\t\t<Td title={user.name}>{user.name}</Td>\r\n\t\t\t\t\t\t\t\t\t<Td title={user.email}>{user.email}</Td>\r\n\t\t\t\t\t\t\t\t\t<Td isRoleTd>\r\n\t\t\t\t\t\t\t\t\t\t<NativeSelect\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={user.Role}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => handleRoleChange(e, user._id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={0}>0</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={1}>1</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={2}>2</option>\r\n\t\t\t\t\t\t\t\t\t\t</NativeSelect>\r\n\t\t\t\t\t\t\t\t\t</Td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableWrapper>\r\n\t\t\t)}\r\n\t\t</Container>\r\n\t);\r\n}\r\n"],"sourceRoot":""}